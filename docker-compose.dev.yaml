services:
  dark-factory:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "8090:8080"
    volumes:
      - ./dark_factory:/app/dark_factory
    environment:
      - JUDGE_BACKEND_MODE=${JUDGE_BACKEND_MODE:-stub}
      - SAGEMAKER_ENDPOINT_NAME=${SAGEMAKER_ENDPOINT_NAME:-}
      - AWS_DEFAULT_REGION=${AWS_DEFAULT_REGION:-us-east-1}
    command: >
      uvicorn dark_factory.service.api:app
      --host 0.0.0.0 --port 8080 --reload

networks:
  default:
    name: bravozero-dev
    external: true
